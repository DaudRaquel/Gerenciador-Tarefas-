# üóÇÔ∏è TaskHub ‚Äî Gerenciador de Tarefas Corporativo

![Python](https://img.shields.io/badge/Python-3.10+-blue?logo=python)
![Flask](https://img.shields.io/badge/Flask-Backend-lightgrey?logo=flask)
![MySQL](https://img.shields.io/badge/MySQL-Database-blue?logo=mysql)
![TailwindCSS](https://img.shields.io/badge/TailwindCSS-UI-38B2AC?logo=tailwindcss)
![Chart.js](https://img.shields.io/badge/Chart.js-Graphs-ff6384?logo=chartdotjs)
![Socket.IO](https://img.shields.io/badge/Realtime-Socket.IO-black?logo=socketdotio)
![License](https://img.shields.io/badge/License-MIT-green)

> Plataforma web para **criar, acompanhar e analisar tarefas** por **colaborador, setor e grupos**, com **notifica√ß√µes**, **chat integrado**, **anexos** e **dashboard interativo**.  
> **Status de integra√ß√£o:** atualmente **n√£o h√° v√≠nculo com o TOTVS RM** ‚Äî os colaboradores s√£o geridos **localmente (MySQL)**.

---

## üìö Sum√°rio

- [Sobre o Projeto](#-sobre-o-projeto)
- [Novidades (vers√£o atual)](#-novidades-vers√£o-atual)
- [Principais Funcionalidades](#-principais-funcionalidades)
- [Demonstra√ß√£o Visual](#-demonstra√ß√£o-visual)
- [Arquitetura (Mermaid)](#-arquitetura-mermaid)
- [API HTTP](#-api-http)
- [Eventos Socket.IO](#-eventos-socketio)
- [Stack T√©cnica](#-stack-t√©cnica)
- [Configura√ß√£o (.env)](#-configura√ß√£o-env)
- [Como Rodar](#Ô∏è-como-rodar)
- [Estrutura de Tabelas (resumo)](#Ô∏è-estrutura-de-tabelas-resumo)
- [Boas Pr√°ticas de Seguran√ßa](#-boas-pr√°ticas-de-seguran√ßa)
- [Roadmap](#-roadmap)
- [Licen√ßa](#-licen√ßa)

---

## üí° Sobre o Projeto

O **TaskHub** centraliza a opera√ß√£o di√°ria entre setores: crie tarefas (individuais, em grupo ou colaborativas), **anexe arquivos**, converse por **chat**, receba **notifica√ß√µes** e acompanhe **KPIs e gr√°ficos** com **Chart.js** (inclui `chartjs-plugin-datalabels` para r√≥tulos leg√≠veis). Interface **responsiva** com **TailwindCSS** e suporte a **tempo real** via **Socket.IO** (com **fallback por polling**).

---

## ‚ú® Novidades (vers√£o atual)

- üîë **Login por Chapa + Senha** (credenciais do pr√≥prio sistema)
- ‚úâÔ∏è **Recupera√ß√£o de senha por e-mail** (token tempor√°rio)
- üë• **Tarefas com m√∫ltiplos respons√°veis** e/ou **visibilidade por Departamento/Grupo**
- üìé **Anexos** na cria√ß√£o e nos **retornos** (hist√≥rico com link)
- üîî **Notifica√ß√µes internas** (painel + √≠cone) e **e-mails de evento**
- üí¨ **Chat corporativo**: **salas por grupo** e **DMs**, presen√ßa online, envio de m√≠dia e **‚Äúchamar aten√ß√£o‚Äù (poke)**
- ‚ö° **Tempo real com Socket.IO** + **fallback por polling** (garante entrega das mensagens)
- üîç **Busca global** (ID, t√≠tulo, descri√ß√£o, departamento)
- üóíÔ∏è **Notas internas** por tarefa
- üìä **Dashboard (aba ‚ÄúDados‚Äù)** com filtros de **Ranking (Mais/Menos Entregas)**, **Funcion√°rio** e **Grupo/Departamento**, e **gr√°ficos on-click** que abrem modal com as tarefas

---

## üöÄ Principais Funcionalidades

### Autentica√ß√£o & Conta
- Cadastro (Chapa, CPF, e-mail, senha)  
- Login por **Chapa + Senha**  
- Esqueci minha senha (token + redefini√ß√£o segura)

### Tarefas
- Tipos: **Individual**, **Grupo Simples** (uma tarefa compartilhada), **Colaborativa** (uma por respons√°vel, agrupadas por `id_group`)  
- Status: **N√£o Iniciado**, **Pendente**, **Em Retorno**, **Conclu√≠do**  
- **Anexos** em cria√ß√£o e nos **retornos**  
- Filtros por **status**, **respons√°vel** e **grupo** + busca por texto

### Chat & Notifica√ß√µes
- **Salas de grupo** e **mensagens privadas (DM)**  
- Emojis, imagens/arquivos, presen√ßa online, **poke**  
- Notifica√ß√µes internas e e-mails transacionais

### Dashboard & KPIs
- Filtros: **Ranking**, **Funcion√°rio**, **Grupo/Departamento**  
- **Gr√°ficos interativos** (abre modal com lista de tarefas ao clicar)  
- R√≥tulos leg√≠veis com **Datalabels**

### Navega√ß√£o
- **Tarefas** (cadastro/edi√ß√£o/listas)  
- **Dados** (dashboard e KPIs)  
- **Chat**  
- **Notifica√ß√µes**  
- **Sair**

---

## üñºÔ∏è Demonstra√ß√£o Visual

| Funcionalidade | Captura | Descri√ß√£o |
|---|---|---|
| **Login e Boas-Vindas** | ![Boas-Vindas](https://github.com/RaquelDaud180/Gerenciador-Tarefas-/blob/main/boasvindas.png) | Sauda√ß√£o hor√°ria personalizada |
| **Dashboard (Setores e Colaboradores)** | ![Dashboard](https://github.com/RaquelDaud180/Gerenciador-Tarefas-/blob/main/dashboard.png) | Vis√£o geral por setor/colaborador |
| **Cards por Status** | ![Cards](https://github.com/RaquelDaud180/Gerenciador-Tarefas-/blob/dd83d092e687c8f3ffa587b597860062fc5904c0/Imagem%20do%20WhatsApp%20de%202025-08-02%20%C3%A0(s)%2020.58.41_6532e51a.jpg) | Destaque por status e setor |
| **Retornos/Notifica√ß√µes** | ![Retornos](https://github.com/RaquelDaud180/Gerenciador-Tarefas-/blob/dd83d092e687c8f3ffa587b597860062fc5904c0/Imagem%20do%20WhatsApp%20de%202025-08-02%20%C3%A0(s)%2020.56.24_53f55fc5.jpg) | Hist√≥rico com anexos e mudan√ßas |

---

## üß≠ Arquitetura (Mermaid)

```mermaid
flowchart LR
  A[Frontend (HTML ‚Ä¢ Tailwind ‚Ä¢ JS ‚Ä¢ Chart.js)] <--> B[Flask API]
  A <-- Socket.IO / Polling --> C[Realtime (Socket.IO)]
  B <--> D[(MySQL)]
  B --> E[SMTP (e-mails)]
  B --> F[Storage de Anexos]

  subgraph App Server
    B
    C
  end
```

---

## üîå API HTTP

| M√©todo | Rota | Descri√ß√£o |
|---|---|---|
| `GET` | `/` | P√°gina inicial (login / boas-vindas) |
| `GET` | `/task_manager` | Interface principal de tarefas |
| `POST` | `/login` | Autentica√ß√£o por chapa + senha |
| `POST` | `/registrar-conta` | Cria√ß√£o de conta |
| `POST` | `/recuperar-senha` | Gera e envia token de recupera√ß√£o |
| `GET, POST` | `/nova-senha/<token>` | Form + submiss√£o de nova senha |
| `POST` | `/salvar-email` | Atualiza e-mail do usu√°rio |
| `GET` | `/colaboradores` | Lista de colaboradores |
| `GET` | `/search_collaborators` | Busca (auto-complete) de colaboradores |
| `POST` | `/create_collaborator` | Cria colaborador |
| `DELETE` | `/delete_collaborator/<colab_id>` | Exclui colaborador |
| `POST` | `/create_task` | Cria tarefa (inclui anexos) |
| `POST` | `/change_status/<task_id>` | Altera status da tarefa |
| `DELETE` | `/delete_task/<task_id>/` | Exclui tarefa |
| `POST` | `/save_return` | Adiciona **retorno** (texto + anexos) |
| `GET` | `/download_return/<path:filename>` | Baixa anexo de retorno |
| `GET` | `/download_anexo/<int:tarefa_id>` | Baixa anexo da tarefa |
| `GET` | `/get_task_details` | Detalhes da tarefa (para modal) |
| `POST` | `/save_internal_note` | Salva nota interna da tarefa |
| `POST` | `/update_status` | Atualiza status (alternativa) |
| `GET` | `/get_data` | Dados do dashboard/KPIs |
| `GET` | `/get_notifications/<chapa>` | Lista notifica√ß√µes do usu√°rio |
| `POST` | `/mark_as_read` | Marca notifica√ß√µes como lidas |
| `GET` | `/chat/history` | Hist√≥rico de sala (grupo) |
| `GET` | `/chat/private_history` | Hist√≥rico de DM |
| `POST` | `/delete_all` | Administra√ß√£o: remover tudo |
| `POST` | `/api/validate` | Valida√ß√£o de colaborador (API interna) |
| `POST` | `/logout` | Encerra sess√£o |

---

## üì° Eventos Socket.IO

| Evento | Dire√ß√£o | Payload | Descri√ß√£o |
|---|---|---|---|
| `connect` | servidor‚áêcliente | ‚Äì | Conex√£o estabelecida |
| `disconnect` | servidor‚áêcliente | ‚Äì | Desconex√£o |
| `identify` | cliente‚áíservidor | `{chapa}` | Identifica usu√°rio conectado |
| `join` | cliente‚áíservidor | `{room}` | Entrar em sala de grupo |
| `leave` | cliente‚áíservidor | `{room}` | Sair de sala |
| `send_message` | cliente‚áíservidor | `{room, text, [media]}` | Mensagem em sala |
| `private_message` | cliente‚áíservidor | `{to, text, [media]}` | Mensagem privada (DM) |
| `poke_user` | cliente‚áíservidor | `{to}` | ‚ÄúChamar aten√ß√£o‚Äù (notifica destino) |

> **Fallback por polling**: se WebSocket/Socket.IO n√£o estiver dispon√≠vel, o cliente usa requisi√ß√µes peri√≥dicas para manter o hist√≥rico sincronizado.

---

## üß± Stack T√©cnica

- **Backend:** Python (Flask), Flask-SocketIO, APScheduler, SMTP (e-mails)  
- **Banco de Dados:** MySQL  
- **Frontend:** HTML, TailwindCSS, JavaScript, Chart.js (+ `chartjs-plugin-datalabels`)  
- **Tempo real:** Socket.IO com fallback por polling  
- **Armazenamento de arquivos:** diret√≥rio configur√°vel para anexos

---

## ‚öôÔ∏è Configura√ß√£o (.env)

```bash
# Flask
FLASK_ENV=production
SECRET_KEY=<chave-super-secreta>

# App
BASE_URL=https://seu-dominio-ou-ip
UPLOAD_FOLDER=/caminho/para/anexos

# MySQL
DB_HOST=localhost
DB_PORT=3306
DB_USER=<usuario>
DB_PASSWORD=<senha>
DB_NAME=<nome_do_banco>

# SMTP (e-mails transacionais)
SMTP_HOST=<smtp.exemplo.com>
SMTP_PORT=465
EMAIL_ADDRESS=<no-reply@exemplo.com>
EMAIL_PASSWORD=<senha>

# (Opcional) Controle de acesso
AUTHORIZED_USERS=<chapa1,chapa2,...>

# (Opcional) Cores por departamento (JSON)
DEPARTMENT_COLORS={"Financeiro":"#0ea5e9","RH":"#22c55e","TI":"#a78bfa"}
```

> **Nunca** versione credenciais. Use `.env`/secret manager.

---

## ‚ñ∂Ô∏è Como Rodar

```bash
# 1) Ambiente
python -m venv .venv
# Windows: .venv\Scripts\activate
# Linux/Mac:
source .venv/bin/activate
pip install -r requirements.txt

# 2) Configurar vari√°veis
cp .env.example .env  # ou crie .env com as vari√°veis acima

# 3) Banco de dados
# Crie o schema e as tabelas (ver resumo abaixo)

# 4) Executar (desenvolvimento)
flask run

# Produ√ß√£o (exemplos):
# gunicorn -k eventlet -w 1 "app:app"
# ou:
# python -m eventlet -m app
```

---

## üóÑÔ∏è Estrutura de Tabelas (resumo)

> Ajuste conforme seu schema atual.

- `colaboradores` ‚Äî (id, chapa, nome, email, ramal, equipe_id, criado_em)  
- `equipes` ‚Äî (id, nome)  
- `tarefas` ‚Äî (id, titulo, descricao, tipo, status, criador_id, id_group, criado_em, atualizado_em)  
- `tarefas_responsaveis` ‚Äî (tarefa_id, colaborador_id)  
- `tarefas_departamentos` ‚Äî (tarefa_id, equipe_id)  
- `retornos` ‚Äî (id, tarefa_id, autor_id, mensagem, criado_em)  
- `anexos` ‚Äî (id, referencia_id, tipo_ref, nome_arquivo, caminho, criado_em)  
- `mensagens` ‚Äî (id, room, autor_id, texto, midia_url, criado_em)  
- `mensagens_privadas` ‚Äî (id, de_id, para_id, texto, midia_url, criado_em)  
- `notificacoes` ‚Äî (id, usuario_id, tipo, payload, lida, criado_em)  
- `recovery_tokens` ‚Äî (id, usuario_id, token, expira_em, usado)

**√çndices sugeridos**  
- `tarefas(status)`, `tarefas(criado_em)`, `tarefas(id_group)`  
- `tarefas_responsaveis(tarefa_id, colaborador_id)`  
- `tarefas_departamentos(tarefa_id, equipe_id)`  
- `mensagens(room, criado_em)`, `mensagens_privadas(de_id, para_id, criado_em)`

---

## üîê Boas Pr√°ticas de Seguran√ßa

- **Sanitizar uploads** (extens√£o/tamanho) e armazenar fora de diret√≥rios p√∫blicos quando poss√≠vel  
- **Hash de senhas** forte (ex.: `bcrypt`/`argon2`) e expira√ß√£o de **tokens**  
- **Rate-limit** em endpoints sens√≠veis (login, recupera√ß√£o, chat)  
- **Logs estruturados** + auditoria de mudan√ßas de status  
- **CORS/CSRF** conforme o cen√°rio de implanta√ß√£o

---

## üó∫Ô∏è Roadmap

- üìå **Kanban** arrast√°vel por status  
- üß© **Men√ß√µes (@usuario)** e **notifica√ß√µes por evento**  
- üîê **Pap√©is/Permiss√µes** (admin/gestor/colaborador)  
- üìä **Relat√≥rios (PDF/Excel)** e m√©tricas de produtividade  
- üîó (Opcional) **Integra√ß√µes externas** via API/ETL

